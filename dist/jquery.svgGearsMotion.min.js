/*
 *  jquery-boilerplate - v4.1.0
 *  A jump-start for jQuery plugins development.
 *  http://jqueryboilerplate.com
 *
 *  Made by Zeno Rocha
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="svgGearsMotion",g={gearsIdPrefix:"gear",gearsTeethNumbers:null,speedBase:.3,speedDampenFactor:.05,mouseInfluenceFactor:.005};a.extend(e.prototype,{init:function(){if(!(this.element instanceof SVGElement))return void this.logError("not a svg element");if(this.pt=this.element.createSVGPoint(),this.gears=[],null===this.settings.gearsTeethNumbers)for(var a=1;;a++){var b=c.getElementById(this.settings.gearsIdPrefix+a);if(null===b)break;this.addGear(b,a%2===0?8:-8)}else for(var d=0;d<this.settings.gearsTeethNumbers.length;d++){var e=this.settings.gearsIdPrefix+(d+1),f=c.getElementById(e);if(null===f){this.logError("item "+e+" not found");break}this.addGear(f,this.settings.gearsTeethNumbers[d])}var g=this,h=new Date,i=h.getTime(),j=0,k=this.settings.speedBase,l=-1,m=-1,n=-1,o=!1,p=-1,q=-1,r=function(a){var b=a-i;i=a,k=(Math.abs(k)*(1-g.settings.speedDampenFactor)+g.settings.speedBase*g.settings.speedDampenFactor)*Math.sign(k),j+=b*k;for(var c=0;c<g.gears.length;c++){var d=g.gears[c];d.item.style.transform="rotate("+j/d.nbDents%360+"deg)"}requestAnimationFrame(r)};requestAnimationFrame(r),this.element.addEventListener("mousemove",function(a){var b=g.cursorPoint(a),c=b.x,d=b.y,e=new Date,f=e.getTime(),h=f-l;l=f,o=!1,q=-1;for(var i=0,j=0,r=0;r<g.gears.length;r++){var s=g.gears[r];if(i=c-s.x,j=d-s.y,i*i+j*j<s.radiusSquared){q=r,o=!0;break}}if(p===q&&q>-1&&h>0){var t=Math.atan2(n,m),u=Math.atan2(j,i),v=u-t;v>Math.PI?t+=2*Math.PI:v<-Math.PI&&(t-=2*Math.PI);var w=g.radToDeg((u-t)/h)*g.gears[q].nbDents;k=k*(1-g.settings.mouseInfluenceFactor)+w*g.settings.mouseInfluenceFactor}p=q,m=i,n=j})},addGear:function(a,b){a.style.transformOrigin="50% 50%";var c=a.getBBox(),d=c.width/2;this.gears.push({item:a,nbDents:b,radius:d,radiusSquared:d*d,x:c.x+d,y:c.y+d})},cursorPoint:function(a){return this.pt.x=a.clientX,this.pt.y=a.clientY,this.pt.matrixTransform(this.element.getScreenCTM().inverse())},logError:function(a){console.log("Gears plugin error : "+a)},radToDeg:function(a){return 180*a/Math.PI},degToRad:function(a){return a*Math.PI/180}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);